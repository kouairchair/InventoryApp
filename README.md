# うちの在庫

## 1.概要
このアプリは家庭の食品や日用品など様々な物を管理するためのアプリです。

賞味期限が近いことを通知したり、買い物リストを作成して必要なものを買い忘れないようにすることができます。

iCloudに対応しているので、同じアカウントでログインしているデバイス間でデータを共有することができます。

## 2.機能
### 商品登録
#### データ作成・登録画面
- "作成"ボタンで空のデータを生成し、それを編集することでデータを作成する。（最大10個）

- バーコードのアイコンを押すとバーコードリーダーが起動し、読み取った商品の名前と画像が入ったデータが作成される。

- "登録"ボタンを押して、作成したデータをデータベースに保存する。

- 商品名が入力されていないデータは登録できない。

#### データ編集画面
- 各項目はボタンやアイコンを押すことで設定できる。

- 画面上部のピッカーで在庫リスト・買い物リストどちらに属するデータなのかを決める。

- "画像を設定する"ボタンのある行をタップすると画像を設定する方法を選択できる。
  - バーコード検索：バーコード検索で取得した画像と商品名をデータに代入する。
  - 自分で撮影：カメラ撮影した画像を正方形にトリミングして使用する。
  - サンプル画像を検索：イラスト画像を使用する。

- "期限"を設定した場合のみ"通知"の日時を設定できるようになる。"通知"の日時を指定してデータを保存するとローカル通知が作成される。

#### バーコードリーダー
データ作成画面で呼び出す場合とデータ編集画面で呼び出す場合で挙動が変わる

- データ作成画面
  - 取得した画像と商品名を最大10セットまで保持して、新たな商品データを作成する。

- データ編集画面
  - 取得した画像と商品名はバーコードを読み取るたびに更新され、編集中のデータを書き換える。

### データ管理
#### フォルダ画面
"編集"ボタンを押すと編集モードになり、新規フォルダ作成や既存のフォルダの編集・削除が行える。

#### データリスト
タップして詳細を確認、編集できる。削除は左スワイプのみ。

- リストの並び
  - 在庫リスト：期限が早い順に並ぶ。過ぎている期限は赤く表示される。
  - 買い物リスト：緊急性が高いものが上に、通常のものは下になる。
  
- データ確認・編集
  - データ作成時とほぼ同じ画面。右上の"編集"ボタンを押すと編集モードになり、"完了"ボタンを押すと終了する。データを更新すると"登録日"も更新される。

### アプリの設定確認
 - アプリの機能に関わる権限を確認できる。実際に設定を変更する場合は"設定アプリを開く"を押して行う。
 
 - "通知の再設定"ボタンを押すとすべてのローカル通知を削除してから、現在より後の時間に指定されているローカル通知のみを作成する。その際、通知日が過ぎているデータは通知を"無し"に更新される。

## 3.データベースの設計
CoreDataモデル

エンティティFolderとItemのリレーションシップ

- Folder

| 属性 | 型 | 概要 |
----|----|----
| name | String | フォルダ名 |
| id | UUID | フォルダの識別ID |
| icon | String | フォルダのアイコンの名前 |
| isStock | Boolean | true = 在庫リスト, false = 買い物リスト |
| items | Item | フォルダ内のアイテムデータ。 1対多のリレーションシップ |

- Item

| 属性 | 型 | 概要 |
----|----|----
| name | String | 商品名 |
| id | UUID | データの識別ID |
| image | Binary Data | 画像データ |
| numberOfItems | Integer 16 | 個数 |
| registrationDate | Date | 登録・更新された日付 |
| deadLine | Date | 賞味期限・使用期限の日付（在庫リストのみ） |
| notificationDate | Date | 期限が近いことを知らせる通知の日付（在庫リストのみ） |
| status | String | 在庫の状態。"未開封"・"開封済み"・"残りわずか"を選択する（在庫リストのみ） |
| isHurry | Boolean | 買い物の緊急性。"緊急"・"通常"を選択する（買い物リストのみ） |
| folder | Folder | 所属しているフォルダ。 1対1のリレーションシップ |


## 4.開発環境
- Xcode 14.2
- macOS Ventura 13.1
- iOS16.0

## 5.画像素材
[フリーイラスト素材集 ジャパクリップ](https://japaclip.com/)

[かわいいフリー素材集　いらすとや](https://www.irasutoya.com/)
